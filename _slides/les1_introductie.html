---
title: "Les 1: Introductie"
description: "Wat houdt het vak Microcontrollers juist in?"
reveal:
---
<section>
  <h1>{{ page.title }}</h1>
</section>
<section>
  <div class="vcontainer">
    <h2>Wat gaan we zien?</h2>
    <ul>
      <li>Arduino hardware platform </li>
      <li>Arduino software libraries</li>
      <li>AVR architectuur en instructieset</li>
      <li>C/C++ ontwikkeling voor embedded systemen</li>
      <li>Embedded systeem design</li>
      <li>Verwerken van analoge sensor data</li>
      <li>IO operaties</li>
      <li>Interfacing met PC toepassingen</li>
      <li>Embedded software bibliotheken</li>
      <li>Logging en debugging</li>
      <li>Interrupts: timer en comparator</li>
    </ul>
    <a href="https://bamaflexweb.ap.be/BMFUIDetailxOLOD.aspx?a=101442&b=5&c=1">Voor meer info: zie ECTS fiche</a>
  </div>
</section>
<section>
  <h2>Hoe gaan we dat zien?</h2>
  <ul>
    <li>Inwerken in microcontrollers mbv Arduino</li>
    <li>Weg strippen van de Arduino software libraries</li>
  </ul>

</section>
<section>
  <div class="vcontainer">
    <h3>Waarom?</h3>
    <div class=hcontainer style='align-items:baseline;'>
      <div class="fragment"style="float: left; width: 60%;">
        <h3>Blink met de Arduinio libraries</h3>
        <pre><code style="height: 375px;" class="Arduinio">
#include &ltArduino.h&gt

void setup()
{
    pinMode(LED_BUILTIN, OUTPUT);
}

void loop()
{
    digitalWrite(LED_BUILTIN, HIGH);
    delay(1000);
    digitalWrite(LED_BUILTIN, LOW);
    delay(1000);
}
        </code></pre>
        <p class="fragment">Compiled size: 1034 bytes (3.2%)</p>
      </div>
      <div class="fragment" style="float: left; width: 60%;">
        <h3>blink zonder Arduino library</h3>
        <pre><code style="height: 375px;"class="Arduino">
#include &ltavr/io.&gt
#include &ltutil/delay.h&gt

int main(void)
{
    DDRB = 1 &lt&lt 5;
    while (1)
    {
        _delay_ms(500);
        PORTB ^= 1 &lt&lt 5;
    }
  return 0;
}
        </code></pre>
        <p class="fragment">Compiled size: 158 bytes (0.5%)</p>
      </div>
    </div>
  </div>
</section>
<section>
  <h2>Wat gaan we doen in de labos</h2>
  <ul>
    <li>Basis IO Operaties</li>
    <li>Communicatie met de seriele poort</li>
    <li>Interrupts</li>
    <li>Chronometer</li>
    <li>Thermostaat</li>
    <li>....</li>
  </ul>
</section>
<section>
  <h2>Evaluatievorm</h2>
  <table>
    <tr>
      <td>Kennistoets</td>
      <td>30%</td>
      <td>Digitaal examen</td>
    </tr>
    <tr>
      <td>Vaardigheidstoets</td>
      <td>40%</td>
      <td>Praktisch examen</td>
    </tr>
    <tr>
      <td>Vaardigheidstoets</td>
      <td>20%</td>
      <td>2 Testmomenten doorheen het jaar.</td>
    </tr>
  </table>
</section>
<section>
  <h2>Regels</h2>
  <ul>
    <li>Optijd komen</li>
    <li>Deur toe = wachten</li>
    <li>Geen hoofddeksels</li>
    <li>Alleen water is toegestaan in de lokalen</li>
  </ul>
</section>

<section>
  <h2>Wat is een microcontroller?</h2>
  <div style="float: left;">
    <ul>
      <li>Voorziet rekenkracht in een klein pakketje</li>
      <li>Integrated Circuit</li>
      <li>Bevat meerdere componenten</li>
      <li>Self contained</li>
      <li>Gebruikt in embedded systemen</li>
    </ul>
  </div>
  <div style="float: right; width: 30%;">
    <img src="img/atmega328p.jpg" alt="">
  </div>
</section>
<section>
  <h2>Gebruik</h2>
  <ul>
    <li>Embedded Systemen</li>
    <li>Spelcomputers <a href="http://www.pcworld.com/article/162588/inside_game_boy.html">(Game Boy)</a></li>
    <li>Smartphones</li>
    <li>Dag dagelijkse items</li>
    <li>...</li>
  </ul>
  <img src="img/gameboy.jpg" style="float: right; width: 40%;" alt="">
</section>
<section>
  <h2>Getting started</h2>
  <ul>
    <li>Wat voor hardware hebben we nu eigenlijk nodig?</li>
    <li>Hoe programmeren we nu een microcontroller?</li>
    <li>Programmeertaal</li>
    <li>Arduino</li>
  </ul>
</section>
<section>
  <h2>Getting started: Hardware</h2>
  <div style="height: 200px;">
    <ul>
      <li>Dev Kits</li>
      <li>Barebones</li>
    </ul>
  </div>
  <div>
    <img src="img/gecko_board.jpg" style="float: left; width: 40%;" alt="">
    <img src="img/standalone.png" style="float: right; width: 40%;" alt="">
  </div>
</section>
<section>
  <h2>Getting Started: Programmatie</h2>
  <ul>
    <li>Programmers</li>
    <li>Bootloaders</li>
  </ul>
</section>
<section>
  <h2>Programmer</h2>
  <ul style="float:left; width: 65%;">
    <li>Extern toestel data schrijft op het geheugen van de microcontroller</li>
    <li>Dit is omslachtig</li>
    <ul>
      <li>Extra hardware</li>
      <li>Compatibiliteit</li>
    </ul>
    <li>Wordt nog gebruikt voor productie</li>
    <li>Voor ontwikkeling: Bootloader</li>
  </ul>
  <img class="plain" src="img/sam-ice.png" style="float: right; width: 30%; background: none;" alt="">
</section>
<section>
  <h2>Bootloader</h2>
  <ul>
    <li>Hetzelfde concept als de bootloader van een computer</li>
    <ul>
      <li>Vertelt CPU waar het operating systeem staat</li>
      <li>Ook mogelijk om het "OS" te overschrijven</li>
    </ul>
    <li>Werking Arduino Uno</li>
    <ul>
      <li>Data wordt verstuurt vanuit PC</li>
      <li>ATmega8u2 zet data om van USB naar UART</li>
      <li>ATmega8u2 reset ATmega328p
        <li>ATmega8u2 stuurt data door naar ATmega328p</li>
        <li>ATmega328p detecteert data op de UART binnen een tijds interval na reset</li>
        <li>Bootloader op ATmega kopieert data naar het flash geheugen</li>
        <li>Tijdsinterval afgelopen, ATmega328p boot met bestaande code</li>
    </ul>
  </ul>
</section>

<section>
  <h2>Getting Started: Programmeertaal</h2>
  <p>C/C++</p>
  <pre><code class="cpp">
  static void txDelay (ostime_t reftime, u1_t secSpan) {
      reftime += rndDelay(secSpan);
      if( LMIC.globalDutyRate == 0  ||  (reftime - LMIC.globalDutyAvail) > 0 ) {
          LMIC.globalDutyAvail = reftime;
          LMIC.opmode |= OP_RNDTX;
      }
  }
  </code></pre>
</section>
<section>
  <h2>Getting Started: Arduino</h2>
  <ul>
    <li>Platform</li>
    <li>Hardware</li>
    <li>Software</li>
    <li>Resources</li>
  </ul>
</section>
<section>
  <h2>Arduino: Platform</h2>
  <h1>Arduino </br>≠ </br>Microcontroller</h1>
</section>
<section>
  <h2>Arduino: Platform</h2>
  <ul>
    <li>Fast electronics prototyping tool</li>
    <li>Doelpubliek: Designers / Elektronica leken</li>
    <li>Voorziet:</li>
    <ul>
      <li>Hardware</li>
      <li>Software</li>
      <li>IDE</li>
      <li>Documentatie</li>
    </ul>
    <li>Veel resources beschikbaar</li>
  </ul>
</section>
<section>
  <h2>Arduino platform</h2>
  <ul>
    <li>Inexpensive</li>
    <li>Cross-Platform</li>
    <li>Simple, clear programming environment</li>
    <li>Open source and extensible software</li>
    <li>Open source and extensible hardware</li>
  </ul>
  <img src="img/arduino_logo.png" style="float: right; width: 40%;" alt="">
</section>
<section>
  <h2>Arduino: Hardware</h2>
  <ul>
    <li>Arduino Boards</li>
    <li>Boards zijn gebaseerd rond een microcontroller</li>
    <li>Boards voorzien de nodige hardware om met de microcontroller te werken.</li>
    <li>Boards zijn uitbreidbaar met shields</li>
    <li>Verschillende boards met specifieke doelen.</li>
  </ul>
</section>
<section>
  <h2>Arduino: Boards</h2>
  <h4></h4>
  <img src="img/arduino_boards.png" style="height: 600px;" alt="">
</section>
<section>
  <h2>Arduino: Uno</h2>
  <div style="float:left; "></div>
  <ol style="width: 45%;">
    <li>Reset switch</li>
    <li>USB B Connector:</li>
    <ul>
      <li>Connectie met PC</li>
      <li>Voedingsbron (5V)</li>
    </ul>
    <li>Barrel jack:</li>
    <ul>
      <li>Voedingsbron</li>
      <li>Input spanning 7V - 12V
    </ul>
    <li>Voltage regulator</li>
  </ol>
  <div style="float:right; width: 45%;">
    <img src="img/arduino_components.png" class="plain" style="background: none;" alt="">
  </div>
</section>
<section>
  <h2>Arduino: Uno</h2>
  <div style="float:left; "></div>
  <ol start="5" style="width: 45%;">
    <li>16MHz kristal</li>
    <li>ATMega8U2</li>
    <ul>
      <li>Hulp microcontroller</li>
      <li>USB naar UART bridge</li>
    </ul>
    <li>ATmega328p</li>
    <ul>
      <li>Hoofd microcontroller</li>
      <li>8 bit mcu</li>
      <li>AVR familie</li>
      <li>Brein van het Arduino board</li>
    </ul>
  </ol>
  <div style="float:right; width: 45%;">
    <img src="img/arduino_components.png" class="plain" style="background: none;" alt="">
  </div>
</section>
<section>
  <h2>ATmega328p</h2>
  <ul style="float:left; width: 65%;">
    <li>Lid van de AVR Microcontroller familie</li>
    <ul>
      <li>Ontworpen door Atmel</li>
      <li>8bit (bus breedte)</li>
      <li>Aangepaste harvard architectuur</li>
      <li>Flash memory ipv EEPROM</li>
      <li>Populair door makkelijk beschikbare tools en Arduino</li>
    </ul>
  </ul>
  <img src="img/atmega328p-pu.png" class="plain" style="float: right; width: 30%; background: none;" alt="">
</section>
<section>
  <h2>ATmega328p</h2>
  <ul style="float:left; width: 65%;">
    <li>8bit mcu</li>
    <li>2 timers</li>
    <li>6 PWM kanalen</li>
    <li>8 kanaals 10bit adc </li>
    <li>6 kanaals 8bit adc </li>
    <li>UART</li>
    <li>SPI</li>
    <li>I²C</li>
    <li>Watchdog</li>
    <li>Comperator</li>
    <li>23 programmeerbare lijnen</li>
  </ul>
  <img src="img/atmega328p-pu.png" class="plain" style="float: right; width: 30%; background: none;" alt="">
</section>
<section data-background-image="img/avr_block_diagram.png" data-background-size="contain" data-background-color="#ffffff">
</section>
<section>
  <h2>ATmega Datasheet</h2>
  <ul>
    <li>Samenvatting</li>
    <li>Specificaties</li>
    <li>Functioneel blokdiagram</li>
    <li>Pinout</li>
    <li>Absolute maximale waardes</li>
    <li>Waarheidstabellen</li>
    <li>Timing diagrammen</li>
    <li>Mogelijke toepassingen</li>
    <li><a href="https://www.sparkfun.com/tutorials/223">Tutorial: Datasheets lezen</a></li>
    <li>FYI: Datasheets ATmega328p - 444 blz.</li>
  </ul>
</section>
<section>
  <h2>Arduino: Uno</h2>
  <div style="float:left; "></div>
  <ol start="8" style="width: 45%;">
    <li>Digitale IO pinnen</li>
    <li>Analoge IO pinnen</li>
    <li>Voeding / ground / referentie spanningen</li>
  </ol>
  <div style="float:right; width: 45%;">
    <img src="img/arduino_components.png" class="plain" style="background: none;" alt="">
  </div>
</section>
<section>
  <h2>IO Pinnen</h2>
  <ul>
    <li>Literatuur: General Purpose In/Out (GPIO)</li>
    <li>Doorverbinding van de pinnen van de ATmega328P</li>
    <li>2 Onderverdelingen</li>
    <ul>
      <li>Digitaal (0 - 1)</li>
      <li>Analoog (0 - 1023)</li>
    </ul>
    <li>Pinnen kunnen vasthangen aan specifieke functionaliteit</li>
    <li>Er gelden stroom limieten voor de pinnen</li>
  </ul>
</section>
<section>
  <h2>Digitale IO Pinnen</h2>
  <ul>
    <li>Sturen een logisch signaal</li>
    <ul>
      <li>HIGH (5v)</li>
      <li>LOW (0v)</li>
    </ul>
    <li>2 richtingen</li>
  </ul>
  <img src="img/ttl_levels.png" style="float: right; width: 40%;" alt="">
</section>
<section>
  <h2>Analoge IO Pinnen</h2>
  <ul>
    <li>Kan spanningen uitlezen</li>
    <li>Zet deze spanning om naar een discrete waarde</li>
    <li>Mapping van 0v tot 5v naar een waarde van 0 tot 1013
    <li>Kan een "spanning schrijven"</li>
    <li>Kan dubbel gebruikt worden als een digitale pin</li>
  </ul>
</section>
<section data-background-image="img/arduino_pinout.jpg" data-background-size="contain" data-background-color="#ffffff">
</section>
<section>
  <h2>Wat gebruiken wij</h2>
  <div class="hcontainer">
    <div class="vcontainer">
      <h5>Arduino Nano</h5>
      <ul>
        <li>Compacte versie van de Uno</li>
        <li>Gebaseerd op de ATmega328p</li>
        <li>Waarom? Breadboard friendly</li>
      </ul>
    </div>
   <img style="width: 40%;" src="./img/arduino_nano.jpg" alt="">
  </div>
</section>
<section>
  <h2>Arduino Opensource Hardware</h2>
  <ul>
    <li>Schematics zijn beschikbaar</li>
    <li>Veel klonen beschikbaar</li>
    <li>Goedkopere alternatieven </li>
    <li>Aliexpress</li>
  </ul>
  <img src="img/seeeduino.jpg" style="float: right; width: 40%;" alt="">
</section>
<section data-background-image="img/arduino_uno_schematic.jpg" data-background-size="contain" data-background-color="#ffffff">
</section>
<section>
  <h2>Arduino: Shields</h2>
  <ul>
    <li>Addons voor de boards</li>
    <li>Extra functionaliteit</li>
    <ul>
      <li>Motorsturing</li>
      <li>LCD</li>
      <li>Communicatie</li>
      <li><b>Protoboard</b></li>
      <li>...</li>
    </ul>
    <li>Standaard vorm factor</li>
    <li>Ready To Use</li>
    <li>Veel resources beschikbaar voor een eigen ontwerp</li>
  </ul>
</section>
<section>
  <h2>Arduino: Shields</h2>
  <img class="plain" src="img/joystick_shield.png" style="float: left; width: 33%; background: none;" alt="">
  <img class="plain" src="img/protoshield.png" style="float: left; width: 33%; background: none;" alt="">
  <img class="plain" src="img/shield_stack.png" style="float: left; width: 33%; background: none;" alt="">
</section>
<section>
  <h2>Arduino Peripherals</h2>
  <div class="hcontainer">
    <div class="vcontainer">
    <h4>Wat zijn peripherals</h4>
    <ul>
      <li>Hardware elementen</li>
      <li>Koppelen extra functionaliteit aan Arduino</li>
      <li>Actuators en Sensors</li>
      <li>Nood aan randcompontenten</li>
      <li>Opbouwen van schakeling</li>
    </ul>
    <h4>Voorbeelden</h4>
    <ul>
      <li>7 segment 4 digit display</li>
      <li>IR Afstandsensor</li>
      <li>Ultrasone afstandsensor</li>
    </ul>
    </div>
    <div class="vcontainer">
      <img class="plain" style="height: 200px; background: none; "src="./img/7segment4d.png" alt="">
      <img class="plain" style="height: 200px; background: none; "src="./img/hrc-sr04.jpg" alt="">
      <img class="plain" style="height: 200px; background: none; "src="./img/ir_distance_sensor.jpg" alt="">
    </div>
  </div>
</section>
<section>
  <h2>Arduino: Software</h2>
  <ul>
    <li>Beschikbaar stellen van libraries</li>
    <li>Gebaseerd op:</li>
    <ul>
      <li>Wiring</li>
      <li>Processing</li>
      <li>avr-libc</li>
    </ul>
    <li>C++ Gebaseerde taal</li>
    <li>Neemt abstractie van de hardware</li>
    <ul>
      <li>Code kan voor meerdere boards compileren</li>
      <li>Werking van de microcontroller is verstopt</li>
    </ul>
  </ul>
</section>
<section>
  <h2>Arduino: Getting Started</h2>
  <ul>
    <li></li>
  </ul>
</section>
<section>
  <h2>Arduino: IDE</h2>
  <img src="img/arduino_ide.png" style="height: 100%;"></img>
</section>
<section>
  <h2>Arduino: IDE</h2>
  <div style="float:left; "></div>
  <ol style="width: 45%;">
    <li>Verify:</br>
      Compileert de code met avr-gcc</li>
    <li>Upload:</br>
      Compileert de code met avr-gcc en</br>
      upload de code met avrdude</li>
    <li>New</li>
    <li>Open</li>
    <li>Save</li>
  </ol>
  <div style="float:right; width: 45%;">
    <img src="img/arduino_ide_numbered.png" alt="">
  </div>
</section>
<section>
  <h2>Arduino: IDE</h2>
  <div style="float:left; "></div>
  <ol start=6" style="width: 45%;">
    <li>Serial Monitor</li>
    <li>Filename</li>
    <li>Sketch</li>
    <li>Statusbar</li>
    <li>Build output</li>
    <li>Board settings</li>
  </ol>
  <div style="float:right; width: 45%;">
    <img src="img/arduino_ide_numbered.png" alt="">
  </div>
</section>

<section>
  <h2>Arduino: IDE</h2>
  <ul>
    <li>Aan te raden instellingen</li>
    <ul>
      <li>Display line numbers</li>
      <li>Code folding</li>
    </ul>
  </ul>
  <img src="img/ide_preferences.png" style="float: right; width: 35%;"></img>
</section>
<section>
  <h2>Sketches</h2>
  <ul>
    <li>Sketches = Arduino programma's</li>
    <li>Examples sketches beschikbaar in de Arduino IDE</li>
    <li>.ino extensie</li>
    <li>2 grote componenten</li>
    <ul>
      <li><pre><code class="cpp" style="display: inline;">void setup();</code></pre></li>
        <li><pre><code class="cpp" style="display: inline;">void loop();</code></pre></li>
    </ul>
    <li><a href="https://www.arduino.cc/en/tutorial/sketch">Documentatie</a></li>
  </ul>
</section>
<section>
  <h2>Blink Sketch</h2>
  <pre><code class="cpp">
  void setup() {
  pinMode(LED_BUILTIN, OUTPUT);


  void loop() {
    digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)
    delay(1000);                       // wait for a second
    digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW
    delay(1000);                       // wait for a second
  }
  </code></pre>
</section>
<section>
  <h2>Sketches</h2>
  <table>
    <tr>
      <b>
        <td>void setup()</td>
        <td>void loop()</td>
      </b>
    </tr>
    <tr>
      <td>Loopt 1 maal</td>
      <td>Eindeloze loop</td>
    </tr>
    <tr>
      <td>Initiële setup</td>
      <td>Logica</td>
    </tr>
  </table>
</section>
<section>
  <h2>Arduino: Documentatie</h2>
  <img class="plain" src="img/arduino_reference.png" alt=""></br>
  <a href="https://www.arduino.cc/en/Reference/HomePage">Arduino Reference</a>
</section>
<section>
  <h2>Code Uploaden</h2>
  <ul>
    <li>Example sketch openen</br>
      <i><b>File > Examples > 01. Basic > Blink</i></b></li>
    <li>COM Poort selecteren</br>
      <i><b>Tools > Port > COMX</i></b></li>
    <li>Board selecteren</br>
      <i><b>Tools > Board > Arduino Nano / Duemilanove / Uno</i></b></li>
  </ul>
</section>
